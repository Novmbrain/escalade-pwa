{
  "name": "escalade-pwa",
  "displayName": "罗源野抱 TOPO",
  "version": "0.1.0",
  "generated": "2026-01-22",
  "techStack": {
    "framework": "Next.js 16.1.2",
    "runtime": "React 19.2.3",
    "database": "MongoDB 7.0.0",
    "styling": "Tailwind CSS 4.x",
    "pwa": "Serwist 9.5.0",
    "testing": "Vitest + Playwright"
  },
  "entryPoints": {
    "home": "src/app/[locale]/page.tsx",
    "routeList": "src/app/[locale]/route/page.tsx",
    "cragDetail": "src/app/[locale]/crag/[id]/page.tsx",
    "routeDetail": "src/app/[locale]/route/[id]/page.tsx",
    "serviceWorker": "src/app/sw.ts",
    "layout": "src/app/layout.tsx"
  },
  "apiRoutes": {
    "beta": "src/app/api/beta/route.ts",
    "weather": "src/app/api/weather/route.ts",
    "geo": "src/app/api/geo/route.ts",
    "log": "src/app/api/log/route.ts",
    "feedback": "src/app/api/feedback/route.ts"
  },
  "coreModules": {
    "database": {
      "path": "src/lib/db/index.ts",
      "exports": ["getAllCrags", "getCragById", "getAllRoutes", "getRouteById", "getRoutesByCragId"]
    },
    "themes": {
      "path": "src/lib/themes/",
      "exports": ["themes", "getTheme", "ThemeId"]
    },
    "logger": {
      "server": "src/lib/logger.ts",
      "client": "src/lib/client-logger.ts"
    },
    "weather": {
      "utils": "src/lib/weather-utils.ts",
      "constants": "src/lib/weather-constants.ts"
    },
    "cache": {
      "path": "src/lib/cache-config.ts",
      "exports": ["ISR_REVALIDATE", "SW_CACHE", "API_CACHE", "HTTP_CACHE"]
    },
    "city": {
      "path": "src/lib/city-config.ts",
      "exports": ["CITIES", "CityId", "CityConfig"]
    }
  },
  "components": {
    "ui": {
      "drawer": "src/components/ui/drawer.tsx",
      "segmentedControl": "src/components/ui/segmented-control.tsx",
      "imageViewer": "src/components/ui/image-viewer.tsx",
      "button": "src/components/ui/button.tsx",
      "card": "src/components/ui/card.tsx",
      "skeleton": "src/components/ui/skeleton.tsx"
    },
    "business": {
      "cragCard": "src/components/crag-card.tsx",
      "weatherCard": "src/components/weather-card.tsx",
      "amapContainer": "src/components/amap-container.tsx",
      "filterDrawer": "src/components/filter-drawer.tsx",
      "searchOverlay": "src/components/search-overlay.tsx",
      "appTabbar": "src/components/app-tabbar.tsx",
      "themeSwitcher": "src/components/theme-switcher.tsx",
      "localeSwitcher": "src/components/locale-switcher.tsx"
    }
  },
  "i18n": {
    "routing": "src/i18n/routing.ts",
    "request": "src/i18n/request.ts",
    "navigation": "src/i18n/navigation.ts",
    "middleware": "src/middleware.ts",
    "messages": {
      "zh": "messages/zh.json",
      "en": "messages/en.json"
    }
  },
  "hooks": {
    "useRouteSearch": "src/hooks/use-route-search.ts",
    "useCitySelection": "src/hooks/use-city-selection.ts",
    "useDelayedLoading": "src/hooks/use-delayed-loading.ts"
  },
  "scripts": {
    "seed": "scripts/seed.ts",
    "migrate": "scripts/migrate-add-cityid.ts",
    "backup": "scripts/backup-to-db.ts"
  },
  "tests": {
    "unitTests": 20,
    "componentTests": 1,
    "totalTests": 304,
    "coverage": "34%",
    "testedModules": [
      "lib/grade-utils", "lib/tokens", "lib/filter-constants",
      "lib/beta-constants", "lib/rate-limit", "lib/crag-theme",
      "lib/themes", "lib/utils", "lib/pinyin-utils",
      "lib/weather-utils", "lib/city-config",
      "hooks/use-route-search", "hooks/use-city-selection", "hooks/use-delayed-loading",
      "components/filter-chip", "components/grade-range-selector",
      "components/drawer", "components/crag-card",
      "components/search-overlay", "components/theme-switcher"
    ]
  },
  "documentation": {
    "aiGuide": "CLAUDE.md",
    "projectOverview": "doc/PROJECT_OVERVIEW.md",
    "readme": "README.md"
  },
  "gitWorkflow": {
    "branchNaming": "feature/issue-{N}-{desc}",
    "prKeywords": ["Closes #{N}", "Fixes #{N}"],
    "ciChecks": ["ESLint", "TypeScript", "Vitest", "Playwright"]
  }
}
