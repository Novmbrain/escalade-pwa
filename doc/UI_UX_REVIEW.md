# UI/UX 新用户体验测试报告

> 测试日期: 2026-02-01
> 测试方式: 模拟新用户通过 Chrome DevTools 手动测试 (iPhone 14 Pro 视口 390×844)
> 测试模式: Light / Dark 模式，中文 / English 语言

## 测试覆盖范围

| 页面/功能 | 状态 | 备注 |
|-----------|------|------|
| 首页（岩场列表） | ✅ | Light & Dark 模式均测试 |
| 城市选择器 | ✅ | 下拉正常，disabled 处理得当 |
| 天气条 | ✅ | 温度、适宜度、湿度均显示 |
| PWA 安装提示 | ✅ | 显示正常，可关闭 |
| 搜索功能 | ✅ | 中文搜索正常，支持拼音 |
| Routes 全部线路页 | ✅ | 筛选、难度选择、排序均正常 |
| 线路详情抽屉 | ✅ | Topo 图、FA、Beta 信息完整 |
| Settings 页面 | ✅ | 主题、语言、离线缓存 |
| 暗黑模式 | ✅ | Dracula 配色整体协调 |
| 中英文切换 | ✅ | 翻译完整 |
| App 介绍页 | ✅ | 引导流程清晰 |
| 岩场详情页 | ⚠️ | 因本地无 DB 加载失败，但错误页设计好 |

## 改进建议

### P0 — 关键体验问题

#### 1. 新用户引导缺失 (Onboarding)

- **问题**: 新用户打开 App 直接看到岩场列表，缺少上下文。"罗源"对非本地攀岩者来说完全陌生。App 介绍页藏在 Settings 深处，新用户几乎不会发现。
- **建议**: 首次访问时自动展示轻量引导 (如 3 步 Swipe 介绍)，或在首页顶部显示一个可关闭的 Welcome 卡片，链接到 `/intro` 页面。
- **相关文件**: `src/app/[locale]/page.tsx`, `src/app/[locale]/intro/page.tsx`

#### 2. 语言自动检测

- **问题**: 首次打开默认是 English (`/en`)，对于一个中国本地攀岩 App，大多数用户是中文用户。
- **建议**: 根据浏览器 `navigator.language` 自动选择语言，中文用户默认进入 `/zh`。
- **相关文件**: `src/middleware.ts` 或 `next.config.ts` (i18n 配置)

### P1 — 重要体验优化

#### ~~3. 首页岩场卡片点击区域~~ ✅ 已完成 (PR #128)

- ~~**问题**: 在测试中点击卡片标题未能跳转——卡片虽然是 `<a>` 链接，但在移动端 touch 事件下似乎有时不够灵敏。~~
- **已实现**: 添加 `touch-manipulation` 消除 300ms 点击延迟，增强 `active:scale-[0.97]` + `active:shadow-md` 按压反馈
- **相关文件**: `src/components/crag-card.tsx`

#### ~~4. 搜索体验优化~~ ✅ 已完成 (PR #128)

- ~~**问题**: 搜索抽屉空白区域很大 (下方大量空白)，搜索结果只显示线路名和岩场名，缺乏更多预览信息。~~
- **已实现**:
  - 搜索结果新增 FA (首攀者) 信息和 Beta 视频标记
  - "浏览全部线路" 按钮改为主色调紫色，视觉更突出
- **相关文件**: `src/components/search-drawer.tsx`

#### ~~5. 难度选择器可发现性~~ ✅ 已完成 (PR #128)

- ~~**问题**: 难度选择器 (0-13 数字条) 在 Routes 页面，"Tap or drag to select grade range" 提示文字颜色偏淡，新用户可能不知道可以拖拽选范围。~~
- **已实现**:
  - 首次使用时显示脉冲动画 + 发光边框引导
  - 提示文字高亮为主色调 + 👆 emoji
  - localStorage 记忆交互状态，仅首次显示
- **相关文件**: `src/components/grade-range-selector.tsx`

#### 6. 岩场卡片信息密度

- **问题**: 卡片右上角有两个图标 (下载状态 ✓ 和天气 10°☁️)，在暗黑模式下视觉层次不够清晰。"V1-V11" 难度范围的绿色标签在两种模式下对比度都不错，但和线路数量标签视觉上差异不大。
- **建议**:
  - 下载状态图标可以更小或整合到卡片其他位置
  - 考虑增加卡片的区域信息 (如 "距你 XX km"，如果有位置权限)
- **相关文件**: `src/components/crag-card.tsx`, `src/components/weather-badge.tsx`

### P2 — 体验细节打磨

#### 7. Routes 页面的页头折叠

- **问题**: 选中岩场筛选后，页面标题从 "All Routes" 变成 "八井村"，很好。但是 header 区域 (搜索 + 筛选 + 难度选择器) 占了将近半屏高度，减少了线路列表的可见面积。
- **建议**: header 在用户向下滚动时可以折叠/吸顶，只保留搜索栏和当前筛选状态，释放更多列表空间。
- **相关文件**: `src/app/[locale]/route/page.tsx`

#### 8. Settings 页面 "累计" 区域

- **问题**: "累计" 下方有一个看起来像加载中的灰色色块，信息不完整或在加载中。
- **建议**: 如果是需要登录才显示的数据，应该展示清晰的提示 (如 "登录后查看攀爬统计")；如果是加载状态，加个 skeleton 动画。
- **相关文件**: `src/app/[locale]/profile/page.tsx`

#### 9. 底部导航栏 "Home" vs "Routes" 语义

- **问题**: 底部 Tab 有 Home (岩场列表)、Routes (全部线路)、Settings，但新用户可能不清楚 "Home" 和 "Routes" 的区别——Home 也在展示线路相关的岩场。
- **建议**: 考虑把 Home 改名为 "Crags" (岩场) / Routes Tab 改名为 "Browse" (浏览)，让分工更清晰。或者在 Home 标签下加"岩场"说明。
- **相关文件**: `src/components/app-tabbar.tsx`

#### 10. 线路详情抽屉的导航

- **问题**: 线路详情抽屉没有明显的关闭按钮 (依赖下滑手势)，也没有返回指示。抽屉内没有 "下一条/上一条线路" 的快速切换。
- **建议**:
  - 在抽屉顶部加可见的关闭指示 (handle 已有但可以更明显)
  - 底部或左右滑动增加相邻线路快速切换
- **相关文件**: `src/components/route-detail-drawer.tsx`

#### 11. 错误页面改进

- **问题**: 岩场详情加载失败的错误页设计不错 (有 Retry + Back to Crags)，但缺少具体的错误描述，用户不知道是网络问题还是数据不存在。
- **建议**: 区分网络错误 ("请检查网络连接") 和数据错误 ("岩场数据暂未上线")，提供不同的引导。
- **相关文件**: `src/app/[locale]/crag/[id]/page.tsx`

### P3 — 长期改进方向

#### 12. 增加地图入口

- **问题**: 首页没有地图视图，用户无法直观了解岩场位置和距离。地图功能只在岩场详情页。
- **建议**: 首页增加一个 Map 视图切换 (列表/地图)，让用户可以从地理位置角度发现附近岩场。
- **相关文件**: `src/app/[locale]/page.tsx`, `src/components/amap-container.tsx`

#### 13. Beta 视频空状态优化

- **问题**: 线路详情中 "Beta Videos - No videos" 是一个终点，没有引导用户贡献内容。
- **建议**: 改为 "还没有 Beta 视频，分享你的攀爬视频？" + 上传入口，鼓励社区贡献。
- **相关文件**: `src/components/beta-list-drawer.tsx`

## 总结

### 做得好的地方 ✅
- **Dracula 暗黑主题** 配色协调，切换流畅
- **多语言支持** 翻译完整 (中/英/法)
- **搜索功能** 响应快速，支持拼音
- **难度筛选器** 交互设计直观 (tap + drag range)
- **PWA 离线缓存** 可视化显示下载状态
- **天气集成** 攀岩适宜度评估对攀岩者非常实用
- **错误状态处理** 有 Retry 和返回按钮

### 最优先改进 🎯
1. **P0-1**: 新用户引导 — 提升首次体验转化率
2. **P0-2**: 语言自动检测 — 减少中文用户的困惑
3. ~~**P1-3**: 卡片点击反馈 — 基础交互体验~~ ✅
4. **P2-7**: Routes 页头折叠 — 释放列表空间
